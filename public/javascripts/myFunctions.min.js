var call={buildQBObj:function(a){var b={};for(var c in a)a[c]&&(b[c]=a[c]);return b.created?(b.created=new Date(a.created),b.year=b.created.getUTCFullYear(b.year),b.month=b.created.getUTCMonth(b.month),b.day=b.created.getUTCDate(b.day),b.created=b.created.toJSON()):b.created="no timestamp available",b},parser:function(a,b){var c=a.slice(1,11),d={},e=c.split("-"),f=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],g=["Jan","Feb","Mar","Apr","May","Juni","Juli","Aug","Sep","Oct","Nov","Dec"];switch(b){case"en":d=e[2]+" "+f[parseInt(e[1]-1)]+" "+e[0];break;case"da":d=e[2]+" "+g[parseInt(e[1]-1)]+" "+e[0]}return d},splitString:function(a){var b=",",c=a.split(b);return c},isAuthenticated:function(a,b,c){return a.isAuthenticated()?c():void b.send("unauthorized OR session expired - log in again")},selection:function(a,b){var c=[];return"events"==b.database?(a.forEach(function(a,d,e){var f=a.created;f.getMonth()+1==b.month&&f.getFullYear()==b.year&&c.push(a)}),c):"images"==b.database?(a.forEach(function(a,d,e){var f=0;a.meta.forEach(function(d,e,g){for(var h=0;h<b.meta.length;h++)d==b.meta[h]&&(f++,f==b.meta.length&&c.push(a))})}),c):void 0},build_set:function(a,b){var c=new Set;switch(a.option){case"year":c.add(b.getUTCFullYear());break;case"month":b.getUTCFullYear()===req.body.year&&c.add(b.getUTCMonth());break;case"day":b.getUTCFullYear()===req.body.year&&b.getUTCMonth()===req.body.month&&c.add(b.getUTCDate())}return c},build_obj:function(a){var b="";return a.forEach(function(c,d,e){b+="'"+c+"'",d<a.length-1&&(b+=",")}),b}};module.exports=call;