function dateParse(e){var n=e.slice(0,10),t=n.split("-"),l=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"];return n=t[2]+" "+l[parseInt(t[1]-1)]+" "+t[0]}var app=angular.module("myApp",["ngRoute","ui.bootstrap","ngAnimate","ngFileUpload"]);app.config(function(e,n){n.html5Mode(!0),e.when("/login",{templateUrl:"views/login.html",controller:"loginCtrl"}).when("/admin",{templateUrl:"views/admin.html",controller:"adminCtrl"}).when("/priv_uk",{templateUrl:"views/priv_en.html",controller:"privUkCtrl"}).when("/priv_dk",{templateUrl:"views/priv_da.html",controller:"privDkCtrl"}).when("/public",{templateUrl:"views/public.html",controller:"publicCtrl"}).otherwise({redirectTo:"/login"})}),app.controller("loginCtrl",["$scope","$http","$location",function(e,n,t){console.log("in login ctrl "),e.submit=function(){console.log("loginCtrl - angular route",e.form),n.post("/login/authenticate",e.form).then(function(e){console.log(e),"admin"===e.data.acct_type?t.path("/admin"):"private"===e.data.acct_type&&"en"===e.data.lang?t.path("/priv_uk"):"private"===e.data.acct_type&&"da"===e.data.lang?t.path("/priv_dk"):"public"===e.data.acct_type?t.path("/public"):t.path("/login")})}}]),app.controller("adminCtrl",["$scope","$http","Upload","$timeout",function(e,n,t,l){var o=document.getElementsByTagName("form"),a=document.getElementById("viewAcct"),s=document.getElementById("viewEvent");e.showAddAcctForm=function(){console.log("show add form"),angular.element(a).css("display","none"),angular.element(s).css("display","none"),angular.element(o).css("display","none"),angular.element(o.addAcct).css("display","block")},e.addAcct=function(){console.log("adding acct ....",e),n.post("/admin_crud/add",e.form).then(function(e){var n=document.getElementById("alerts");angular.element(a).css("display","none"),console.log("in scope-add-acct logging response",e),angular.element(n).html(e.data)})},e.showDelAcctForm=function(){console.log("show delete form"),angular.element(a).css("display","none"),angular.element(s).css("display","none"),angular.element(o).css("display","none"),angular.element(o.delAcct).css("display","block")},e.viewAcct=function(){console.log("viewing acct ....",e.form.acct_type),n.get("/admin_crud/"+e.form.acct_type).then(function(n){var t=document.getElementById("alerts");console.log("in scope-delete-acct logging response",n.data),e.users=n.data,console.log(e.users),e.form.id=n.data.id,angular.element(t).html(n.data),angular.element(a).css("display","inline")})},e.delAcct=function(){console.log("deleting acct... ",this.user.username),n["delete"]("/admin_crud/"+this.user.username).then(function(n){var t=document.getElementById("alerts");console.log("printing response: ",n),angular.element(t).html(n.data),e.viewAcct()})},e.showChgPWForm=function(){console.log("show change pw form"),angular.element(a).css("display","none"),angular.element(s).css("display","none"),angular.element(o).css("display","none"),angular.element(o.chgPW).css("display","block")},e.chgPW=function(){console.log("changing pw for acct ",e.form.username),e.form.new_password===e.form.confirm_password?n.put("/admin_crud/chg",e.form).then(function(e){console.log("printing response in chgpw ",e);var n=document.getElementById("alerts");console.log("printing response: ",e),angular.element(n).html(e.data)}):angular.element(document.getElementById("alerts")).html("password mismatch")},e.showAddEventForm=function(){console.log("show add event form"),angular.element(a).css("display","none"),angular.element(s).css("display","none"),angular.element(o).css("display","none"),angular.element(o.addEvent).css("display","block")},e.addEvent=function(){e.form.url=document.getElementById("image").placeholder,n.post("/event_crud/add",e.form).then(function(e){console.log("image post response: ",e),angular.element(document.getElementById("alerts")).html(e.data)})},e.uploadFiles=function(n){e.f=n,n&&!n.$error&&(n.upload=t.upload({url:"/event_crud/upload",data:{file:n}}),n.upload.then(function(e){l(function(){n.result=e.data})},function(n){n.status>0&&(e.errorMsg=n.status+": "+n.data)}),n.upload.progress(function(e){n.progress=Math.min(100,parseInt(100*e.loaded/e.total))}))},e.showGetEventForm=function(){console.log("get event form"),angular.element(a).css("display","none"),angular.element(s).css("display","none"),angular.element(o).css("display","none"),angular.element(o.getEvent).css("display","block")},e.getEventById=function(){console.log("getting most recent event..."),angular.element(a).css("display","none"),angular.element(o).css("display","none");document.getElementById("latest");n.get("/event_crud/view").then(function(n){console.log("get event response ",n),e.form=n.data,e.form.created=dateParse(n.data.created),angular.element(s).css("display","block")})}}]),app.controller("privDkCtrl",["$scope","$http","$log","$modal",function(e,n,t,l){e.message="velkommen vandaler",e.animationsEnabled=!0,e.open=function(n){l.open({animation:e.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",size:n,resolve:{events:function(){return e.event}}})}}]),app.controller("privUkCtrl",["$scope","$http","$log","$modal",function(e,n,t,l){e.message="welcome kilsythians",console.log(e),e.animationsEnabled=!0,e.open=function(n){l.open({animation:e.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",size:n,resolve:{events:function(){return e.event}}})}}]),app.controller("ModalInstanceCtrl",function(e,n,t){e.temp="",t.get("/event_crud/view").then(function(n){console.log("hej der",n),e.event=n.data,e.event.created=dateParse(n.data.created),e.event.url="./images/"+n.data.url}),e.download=function(){console.log("in download",e.temp),t.get("/download/file/"+e.temp).then(function(e){console.log("download response ",e.data)})}}),app.controller("publicCtrl",["$scope","$http",function(e,n){e.message="velkommen til den offentlige afdeling"}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuZ3VsYXJfYXBwLmpzIl0sIm5hbWVzIjpbImRhdGVQYXJzZSIsInN0cmluZyIsInRlbXAiLCJzbGljZSIsImFyciIsInNwbGl0IiwibW9udGhzIiwicGFyc2VJbnQiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsImh0bWw1TW9kZSIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiJHNjb3BlIiwiJGh0dHAiLCIkbG9jYXRpb24iLCJjb25zb2xlIiwibG9nIiwic3VibWl0IiwiZm9ybSIsInBvc3QiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwiYWNjdF90eXBlIiwicGF0aCIsImxhbmciLCJVcGxvYWQiLCIkdGltZW91dCIsImZvcm1zIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImFjY3QiLCJnZXRFbGVtZW50QnlJZCIsImV2ZW50Iiwic2hvd0FkZEFjY3RGb3JtIiwiZWxlbWVudCIsImNzcyIsImFkZEFjY3QiLCJhbGVydCIsImh0bWwiLCJzaG93RGVsQWNjdEZvcm0iLCJkZWxBY2N0Iiwidmlld0FjY3QiLCJnZXQiLCJ1c2VycyIsImlkIiwidGhpcyIsInVzZXIiLCJ1c2VybmFtZSIsInNob3dDaGdQV0Zvcm0iLCJjaGdQVyIsIm5ld19wYXNzd29yZCIsImNvbmZpcm1fcGFzc3dvcmQiLCJwdXQiLCJzaG93QWRkRXZlbnRGb3JtIiwiYWRkRXZlbnQiLCJ1cmwiLCJwbGFjZWhvbGRlciIsInVwbG9hZEZpbGVzIiwiZmlsZSIsImYiLCIkZXJyb3IiLCJ1cGxvYWQiLCJyZXN1bHQiLCJzdGF0dXMiLCJlcnJvck1zZyIsInByb2dyZXNzIiwiZXZ0IiwiTWF0aCIsIm1pbiIsImxvYWRlZCIsInRvdGFsIiwic2hvd0dldEV2ZW50Rm9ybSIsImdldEV2ZW50IiwiZ2V0RXZlbnRCeUlkIiwiY3JlYXRlZCIsIiRsb2ciLCIkbW9kYWwiLCJtZXNzYWdlIiwiYW5pbWF0aW9uc0VuYWJsZWQiLCJvcGVuIiwic2l6ZSIsImFuaW1hdGlvbiIsInJlc29sdmUiLCJldmVudHMiLCIkbW9kYWxJbnN0YW5jZSIsImRvd25sb2FkIl0sIm1hcHBpbmdzIjoiQUF1U0EsUUFBQUEsV0FBQUMsR0FDQSxHQUFBQyxHQUFBRCxFQUFBRSxNQUFBLEVBQUEsSUFDQUMsRUFBQUYsRUFBQUcsTUFBQSxLQUNBQyxHQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxPQUFBLE9BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQSxNQUVBLE9BREFKLEdBQUFFLEVBQUEsR0FBQSxJQUFBRSxFQUFBQyxTQUFBSCxFQUFBLEdBQUEsSUFBQSxJQUFBQSxFQUFBLEdBM1NBLEdBQUFJLEtBQUFDLFFBQUFDLE9BQUEsU0FBQSxVQUFBLGVBQUEsWUFBQSxnQkFFQUYsS0FBQUcsT0FBQSxTQUFBQyxFQUFBQyxHQUNBQSxFQUFBQyxXQUFBLEdBQ0FGLEVBQ0FHLEtBQUEsVUFDQUMsWUFBQSxtQkFDQUMsV0FBQSxjQUVBRixLQUFBLFVBQ0FDLFlBQUEsbUJBQ0FDLFdBQUEsY0FFQUYsS0FBQSxZQUNBQyxZQUFBLHFCQUNBQyxXQUFBLGVBRUFGLEtBQUEsWUFDQUMsWUFBQSxxQkFDQUMsV0FBQSxlQUdBRixLQUFBLFdBQ0FDLFlBQUEsb0JBQ0FDLFdBQUEsZUFFQUMsV0FBQUMsV0FBQSxhQUlBWCxJQUFBUyxXQUFBLGFBQUEsU0FBQSxRQUFBLFlBQUEsU0FBQUcsRUFBQUMsRUFBQUMsR0FDQUMsUUFBQUMsSUFBQSxrQkFDQUosRUFBQUssT0FBQSxXQUNBRixRQUFBQyxJQUFBLDRCQUFBSixFQUFBTSxNQUNBTCxFQUFBTSxLQUFBLHNCQUFBUCxFQUFBTSxNQUNBRSxLQUFBLFNBQUFDLEdBQ0FOLFFBQUFDLElBQUFLLEdBQ0EsVUFBQUEsRUFBQUMsS0FBQUMsVUFDQVQsRUFBQVUsS0FBQSxVQUVBLFlBQUFILEVBQUFDLEtBQUFDLFdBQUEsT0FBQUYsRUFB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b0JBQ0F3RSxLQUFBQSxFQUNBRSxTQUNBQyxPQUFBLFdBQ0EsTUFBQXhFLEdBQUFxQixjQWFBakMsSUFBQVMsV0FBQSxvQkFBQSxTQUFBRyxFQUFBeUUsRUFBQXhFLEdBQ0FELEVBQUFsQixLQUFBLEdBQ0FtQixFQUFBOEIsSUFBQSxvQkFDQXZCLEtBQUEsU0FBQUMsR0FDQU4sUUFBQUMsSUFBQSxVQUFBSyxHQUNBVCxFQUFBcUIsTUFBQVosRUFBQUMsS0FDQVYsRUFBQXFCLE1BQUEwQyxRQUFBbkYsVUFBQTZCLEVBQUFDLEtBQUFxRCxTQUNBL0QsRUFBQXFCLE1BQUF1QixJQUFBLFlBQUFuQyxFQUFBQyxLQUFBa0MsTUFJQTVDLEVBQUEwRSxTQUFBLFdBQ0F2RSxRQUFBQyxJQUFBLGNBQUFKLEVBQUFsQixNQUNBbUIsRUFBQThCLElBQUEsa0JBQUEvQixFQUFBbEIsTUFDQTBCLEtBQUEsU0FBQUMsR0FDQU4sUUFBQUMsSUFBQSxxQkFBQUssRUFBQUMsV0FRQXRCLElBQUFTLFdBQUEsY0FBQSxTQUFBLFFBQUEsU0FBQUcsRUFBQUMsR0FDQUQsRUFBQWtFLFFBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbXlBcHAnLCBbJ25nUm91dGUnLCAndWkuYm9vdHN0cmFwJywgJ25nQW5pbWF0ZScsICduZ0ZpbGVVcGxvYWQnXSk7XG5cbmFwcC5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKXtcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgLndoZW4oJy9sb2dpbicsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbG9naW4uaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnbG9naW5DdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL2FkbWluJywge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9hZG1pbi5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdhZG1pbkN0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC53aGVuKCcvcHJpdl91aycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcHJpdl9lbi5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdwcml2VWtDdHJsJ1xuICAgICAgICB9KVxuICAgICAgICAud2hlbignL3ByaXZfZGsnLCB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3ByaXZfZGEuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAncHJpdkRrQ3RybCdcbiAgICAgICAgfSlcblxuICAgICAgICAud2hlbignL3B1YmxpYycsIHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvcHVibGljLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ3B1YmxpY0N0cmwnXG4gICAgICAgIH0pXG4gICAgICAgIC5vdGhlcndpc2Uoe3JlZGlyZWN0VG86ICcvbG9naW4nfSlcbn0pO1xuXG4vL1JvdXRpbmcgb24gYWNjdF90eXBlXG5hcHAuY29udHJvbGxlcignbG9naW5DdHJsJyxbJyRzY29wZScsICckaHR0cCcsICckbG9jYXRpb24nLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9jYXRpb24pe1xuICAgIGNvbnNvbGUubG9nKCdpbiBsb2dpbiBjdHJsICcpO1xuICAgICRzY29wZS5zdWJtaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICBjb25zb2xlLmxvZygnbG9naW5DdHJsIC0gYW5ndWxhciByb3V0ZScsICRzY29wZS5mb3JtKTtcbiAgICAgICAgJGh0dHAucG9zdCgnL2xvZ2luL2F1dGhlbnRpY2F0ZScsICRzY29wZS5mb3JtKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLmFjY3RfdHlwZSA9PT0gJ2FkbWluJyl7XG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvYWRtaW4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZihyZXNwb25zZS5kYXRhLmFjY3RfdHlwZSA9PT0gJ3ByaXZhdGUnICYmIHJlc3BvbnNlLmRhdGEubGFuZyA9PT0gJ2VuJyl7XG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvcHJpdl91aycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmKHJlc3BvbnNlLmRhdGEuYWNjdF90eXBlID09PSAncHJpdmF0ZScgJiYgcmVzcG9uc2UuZGF0YS5sYW5nID09PSAnZGEnKXtcbiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9wcml2X2RrJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYocmVzcG9uc2UuZGF0YS5hY2N0X3R5cGUgPT09ICdwdWJsaWMnKXtcbiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9wdWJsaWMnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZXskbG9jYXRpb24ucGF0aCgnL2xvZ2luJyl9O1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbn1dKTtcblxuXG5hcHAuY29udHJvbGxlcignYWRtaW5DdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnVXBsb2FkJywgJyR0aW1lb3V0JywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgVXBsb2FkLCAkdGltZW91dCl7XG4vL2FwcC5jb250cm9sbGVyKCdhZG1pbkN0cmwnLCBbJyRzY29wZScsICckaHR0cCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHApe1xuXG4gICAgICAgIHZhciBmb3JtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdmb3JtJyk7XG4gICAgICAgIHZhciBhY2N0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZXdBY2N0Jyk7XG4gICAgICAgIHZhciBldmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWV3RXZlbnQnKTtcbiAgICAgICAgLy92YXIgYWxlcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnRzJyk7XG4gICAgICAgIC8vY29uc29sZS5sb2coZm9ybXMuYWRkQWNjdCk7XG5cbiAgICAgICAgJHNjb3BlLnNob3dBZGRBY2N0Rm9ybSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2hvdyBhZGQgZm9ybScpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGFjY3QpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZXZlbnQpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZm9ybXMpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZm9ybXMuYWRkQWNjdCkuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuYWRkQWNjdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkaW5nIGFjY3QgLi4uLicsICRzY29wZSk7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KCcvYWRtaW5fY3J1ZC9hZGQnLCAkc2NvcGUuZm9ybSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhbGVydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGVydHMnKTtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGFjY3QpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbiBzY29wZS1hZGQtYWNjdCBsb2dnaW5nIHJlc3BvbnNlJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoYWxlcnQpLmh0bWwocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2hvd0RlbEFjY3RGb3JtID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzaG93IGRlbGV0ZSBmb3JtJyk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoYWNjdCkuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChldmVudCkuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChmb3JtcykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChmb3Jtcy5kZWxBY2N0KS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcblxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS52aWV3QWNjdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndmlld2luZyBhY2N0IC4uLi4nLCAkc2NvcGUuZm9ybS5hY2N0X3R5cGUpO1xuICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYWRtaW5fY3J1ZC8nKyAkc2NvcGUuZm9ybS5hY2N0X3R5cGUpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWxlcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnRzJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbiBzY29wZS1kZWxldGUtYWNjdCBsb2dnaW5nIHJlc3BvbnNlJywgcmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2VycyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRzY29wZS51c2Vycyk7XG4gICAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLmZvcm0uYWNjdF90eXBlID0gcmVzcG9uc2UuZGF0YS5hY2N0X3R5cGU7XG4gICAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLmZvcm0uaWQgPSByZXNwb25zZS5kYXRhLl9pZDtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZvcm0uaWQgPSByZXNwb25zZS5kYXRhLmlkO1xuICAgICAgICAgICAgICAgICAgICAvLyRzY29wZS5mb3JtLmxhbmcgPSByZXNwb25zZS5kYXRhLmxhbmc7XG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChhbGVydCkuaHRtbChyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGFjY3QpLmNzcygnZGlzcGxheScsICdpbmxpbmUnKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5kZWxBY2N0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGluZyBhY2N0Li4uICcsIHRoaXMudXNlci51c2VybmFtZSk7XG4gICAgICAgICAgICAkaHR0cC5kZWxldGUoJy9hZG1pbl9jcnVkLycgKyB0aGlzLnVzZXIudXNlcm5hbWUpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWxlcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxlcnRzJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcmludGluZyByZXNwb25zZTogJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoYWxlcnQpLmh0bWwocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS52aWV3QWNjdCgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNob3dDaGdQV0Zvcm0gPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nob3cgY2hhbmdlIHB3IGZvcm0nKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChhY2N0KS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGV2ZW50KS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGZvcm1zKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGZvcm1zLmNoZ1BXKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcblxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5jaGdQVyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2hhbmdpbmcgcHcgZm9yIGFjY3QgJywgJHNjb3BlLmZvcm0udXNlcm5hbWUpO1xuXG4gICAgICAgICAgICBpZigkc2NvcGUuZm9ybS5uZXdfcGFzc3dvcmQgPT09ICRzY29wZS5mb3JtLmNvbmZpcm1fcGFzc3dvcmQpe1xuICAgICAgICAgICAgICAgICRodHRwLnB1dCgnL2FkbWluX2NydWQvY2hnJywgJHNjb3BlLmZvcm0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcmludGluZyByZXNwb25zZSBpbiBjaGdwdyAnLHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbGVydCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGVydHMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcmludGluZyByZXNwb25zZTogJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGFsZXJ0KS5odG1sKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGVydHMnKSkuaHRtbCgncGFzc3dvcmQgbWlzbWF0Y2gnKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH07XG5cblxuICAgICAgICAkc2NvcGUuc2hvd0FkZEV2ZW50Rm9ybSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2hvdyBhZGQgZXZlbnQgZm9ybScpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGFjY3QpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZXZlbnQpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZm9ybXMpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZm9ybXMuYWRkRXZlbnQpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmFkZEV2ZW50ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICRzY29wZS5mb3JtLnVybCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZScpLnBsYWNlaG9sZGVyO1xuICAgICAgICAgICAgJGh0dHAucG9zdCgnL2V2ZW50X2NydWQvYWRkJywgJHNjb3BlLmZvcm0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaW1hZ2UgcG9zdCByZXNwb25zZTogJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FsZXJ0cycpKS5odG1sKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cbiAgICAgICAgICRzY29wZS51cGxvYWRGaWxlcyA9IGZ1bmN0aW9uKGZpbGUpe1xuICAgICAgICAgICAgICRzY29wZS5mID0gZmlsZTtcbiAgICAgICAgICAgICBpZihmaWxlICYmICFmaWxlLiRlcnJvcikge1xuICAgICAgICAgICAgICAgICBmaWxlLnVwbG9hZCA9IFVwbG9hZC51cGxvYWQoe1xuICAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2V2ZW50X2NydWQvdXBsb2FkJyxcbiAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtmaWxlOiBmaWxlfVxuICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgIGZpbGUudXBsb2FkLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlLnJlc3VsdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLnN0YXR1cyA+IDApXG4gICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3JNc2cgPSByZXNwb25zZS5zdGF0dXMgKyAnOiAnICsgcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgIGZpbGUudXBsb2FkLnByb2dyZXNzKGZ1bmN0aW9uKGV2dCl7XG4gICAgICAgICAgICAgICAgICAgICBmaWxlLnByb2dyZXNzID0gTWF0aC5taW4oMTAwLCBwYXJzZUludCgxMDAuMCAqIGV2dC5sb2FkZWQgLyBldnQudG90YWwpKTtcbiAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2hvd0dldEV2ZW50Rm9ybSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZ2V0IGV2ZW50IGZvcm0nKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChhY2N0KS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGV2ZW50KS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGZvcm1zKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGZvcm1zLmdldEV2ZW50KS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcblxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5nZXRFdmVudEJ5SWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldHRpbmcgbW9zdCByZWNlbnQgZXZlbnQuLi4nKTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZWxlbWVudChhY2N0KS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgYW5ndWxhci5lbGVtZW50KGZvcm1zKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgdmFyIGxhdGVzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXRlc3QnKTtcblxuICAgICAgICAgICAgJGh0dHAuZ2V0KCcvZXZlbnRfY3J1ZC92aWV3JylcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXQgZXZlbnQgcmVzcG9uc2UgJywgcmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZm9ybSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5mb3JtLmNyZWF0ZWQgPSBkYXRlUGFyc2UocmVzcG9uc2UuZGF0YS5jcmVhdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgLy8kc2NvcGUuZm9ybS51cmwgPScuL2ltYWdlcy8nICsgcmVzcG9uc2UuZGF0YS5pbWFnZV91cmw7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ3Njb3BlLmZvcm0udXJsID0nLCAkc2NvcGUuZm9ybS51cmwpO1xuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmVsZW1lbnQoZXZlbnQpLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG5cblxuICAgIH1dKTtcblxuXG5hcHAuY29udHJvbGxlcigncHJpdkRrQ3RybCcsIFsnJHNjb3BlJywgJyRodHRwJywgJyRsb2cnLCAnJG1vZGFsJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGxvZywgJG1vZGFsKXtcbiAgICAkc2NvcGUubWVzc2FnZSA9ICd2ZWxrb21tZW4gdmFuZGFsZXInO1xuICAgICAgICAkc2NvcGUuYW5pbWF0aW9uc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uIChzaXplKSB7XG5cbiAgICAgICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbXlNb2RhbENvbnRlbnQuaHRtbCcsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ01vZGFsSW5zdGFuY2VDdHJsJyxcbiAgICAgICAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmV2ZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuXG59XSk7XG5cbmFwcC5jb250cm9sbGVyKCdwcml2VWtDdHJsJywgWyckc2NvcGUnLCAnJGh0dHAnLCAnJGxvZycsICckbW9kYWwnLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkbG9nLCAkbW9kYWwpe1xuICAgICRzY29wZS5tZXNzYWdlID0gJ3dlbGNvbWUga2lsc3l0aGlhbnMnO1xuICAgIGNvbnNvbGUubG9nKCRzY29wZSk7XG4gICAgJHNjb3BlLmFuaW1hdGlvbnNFbmFibGVkID0gdHJ1ZTtcbiAgICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uIChzaXplKSB7XG5cbiAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG4gICAgICAgICAgICBhbmltYXRpb246ICRzY29wZS5hbmltYXRpb25zRW5hYmxlZCxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbXlNb2RhbENvbnRlbnQuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTW9kYWxJbnN0YW5jZUN0cmwnLFxuICAgICAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgICBldmVudHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5ldmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuXG59XSk7XG5cbi8vIFBsZWFzZSBub3RlIHRoYXQgJG1vZGFsSW5zdGFuY2UgcmVwcmVzZW50cyBhIG1vZGFsIHdpbmRvdyAoaW5zdGFuY2UpIGRlcGVuZGVuY3kuXG4vLyBJdCBpcyBub3QgdGhlIHNhbWUgYXMgdGhlICRtb2RhbCBzZXJ2aWNlIHVzZWQgYWJvdmUuXG5cbmFwcC5jb250cm9sbGVyKCdNb2RhbEluc3RhbmNlQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbEluc3RhbmNlLCAkaHR0cCkge1xuICAgICRzY29wZS50ZW1wID0nJztcbiAgICAkaHR0cC5nZXQoJy9ldmVudF9jcnVkL3ZpZXcnKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaGVqIGRlcicsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICRzY29wZS5ldmVudCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICAkc2NvcGUuZXZlbnQuY3JlYXRlZCA9IGRhdGVQYXJzZShyZXNwb25zZS5kYXRhLmNyZWF0ZWQpO1xuICAgICAgICAgICAgJHNjb3BlLmV2ZW50LnVybCA9Jy4vaW1hZ2VzLycgKyByZXNwb25zZS5kYXRhLnVybDtcblxuICAgICAgICB9KTtcblxuICAgICRzY29wZS5kb3dubG9hZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGNvbnNvbGUubG9nKCdpbiBkb3dubG9hZCcsICRzY29wZS50ZW1wKTtcbiAgICAgICAgJGh0dHAuZ2V0KCcvZG93bmxvYWQvZmlsZS8nKyAkc2NvcGUudGVtcClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Rvd25sb2FkIHJlc3BvbnNlICcsIHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgfSlcbiAgICB9XG5cblxufSk7XG5cblxuYXBwLmNvbnRyb2xsZXIoJ3B1YmxpY0N0cmwnLCBbJyRzY29wZScsICckaHR0cCcsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHApe1xuICAgICRzY29wZS5tZXNzYWdlID0gJ3ZlbGtvbW1lbiB0aWwgZGVuIG9mZmVudGxpZ2UgYWZkZWxpbmcnO1xufV0pO1xuXG4vL3BhcnNlIERhdGUoKSBzdHJpbmcgdG8gbmV3IGZvcm1hdFxuZnVuY3Rpb24gZGF0ZVBhcnNlKHN0cmluZyl7XG4gICAgdmFyIHRlbXAgPSBzdHJpbmcuc2xpY2UoMCwxMCk7XG4gICAgdmFyIGFyciA9IHRlbXAuc3BsaXQoJy0nKTtcbiAgICB2YXIgbW9udGhzID1bJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnXTtcbiAgICB0ZW1wID0gYXJyWzJdICsgJyAnICsgbW9udGhzW3BhcnNlSW50KGFyclsxXS0xKV0gKyAnICcgKyBhcnJbMF07XG4gICAgcmV0dXJuIHRlbXA7XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
