var call={buildQBObj:function(a){var b={};for(var c in a)a[c]&&(b[c]=a[c]);return b.created?(b.created=new Date(a.created),b.year=b.created.getUTCFullYear(b.year),b.month=b.created.getUTCMonth(b.month),b.month=b.month.toString(),b.day=b.created.getUTCDate(b.day),b.created=b.created.toJSON()):b.created="no timestamp available",b},parser:function(a,b){var c={},d=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],e=["Jan","Feb","Mar","Apr","May","Juni","Juli","Aug","Sep","Oct","Nov","Dec"];switch(b){case"en":c=a.day+" "+d[parseInt(a.month)]+" "+a.year;break;case"da":c=a.day+" "+e[parseInt(a.month)]+" "+a.year}return c},splitString:function(a){var b=",",c=a.split(b);return c},isAuthenticated:function(a,b,c){return a.isAuthenticated()?c():void b.send("unauthorized OR session expired - log in again")},selection:function(a,b){var c=[];return"events"==b.database?(a.forEach(function(a,d,e){var f=a.created;f.getMonth()+1==b.month&&f.getFullYear()==b.year&&c.push(a)}),c):"images"==b.database?(a.forEach(function(a,d,e){var f=0;a.meta.forEach(function(d,e,g){for(var h=0;h<b.meta.length;h++)d==b.meta[h]&&(f++,f==b.meta.length&&c.push(a))})}),c):void 0}};module.exports=call;