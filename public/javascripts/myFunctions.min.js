var call={buildQBObj:function(a){var b,c,d,e,f={};for(var g in a)null!==a[g]&&"null"!==a[g]&&(f[g]=a[g]);return f.created?(f.created=new Date(a.created),f.year=f.created.getUTCFullYear(f.year),f.month=f.created.getUTCMonth(f.month),f.day=f.created.getUTCDate(f.day)):(3==a.file.split(" ")[0].split("-").length?(b=a.file.split(" ")[0].split("-"),f.year=b[0],f.month=b[1]-1,f.day=b[2],b=a.file.split(" ")[1].split("."),c=b[0],d=b[1],e=b[2]):a.file.split("_").length>=3&&8==a.file.split("_")[1].length&&a.file.split("_")[2].length>=6&&(b=a.file.split("_")[1],f.year=b.slice(0,4),f.month=b.slice(4,6)-1,f.day=b.slice(6,8),b=a.file.split("_")[2],c=b.slice(0,2),d=b.slice(2,4),e=b.slice(4,6)),f.created=new Date,f.created.setUTCFullYear(f.year),f.created.setUTCMonth(f.month),f.created.setUTCDate(f.day),f.created.setUTCHours(c),f.created.setUTCMinutes(d),f.created.setUTCSeconds(e)),"Invalid Date"!=f.created&&(f.created=f.created.toJSON()),f},parser:function(a,b){var c=a.slice(1,11),d={},e=c.split("-"),f=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],g=["Jan","Feb","Mar","Apr","May","Juni","Juli","Aug","Sep","Oct","Nov","Dec"];switch(b){case"en":d=e[2]+" "+f[parseInt(e[1]-1)]+" "+e[0];break;case"da":d=e[2]+" "+g[parseInt(e[1]-1)]+" "+e[0]}return d},splitString:function(a){var b=",",c=a.split(b);return c},isAuthenticated:function(a,b,c){return a.isAuthenticated()?c():void b.send("unauthorized OR session expired - log in again")},selection:function(a,b){var c=[];return"events"==b.database?(a.forEach(function(a,d,e){var f=a.created;f.getMonth()+1==b.month&&f.getFullYear()==b.year&&c.push(a)}),c):"images"==b.database?(a.forEach(function(a,d,e){var f=0;a.meta.forEach(function(d,e,g){for(var h=0;h<b.meta.length;h++)d==b.meta[h]&&(f++,f==b.meta.length&&c.push(a))})}),c):void 0},build_set:function(a,b){var c=new Set;switch(a.option){case"year":c.add(b.getUTCFullYear());break;case"month":b.getUTCFullYear()===req.body.year&&c.add(b.getUTCMonth());break;case"day":b.getUTCFullYear()===req.body.year&&b.getUTCMonth()===req.body.month&&c.add(b.getUTCDate())}return c},build_obj:function(a){var b="";return a.forEach(function(c,d,e){b+="'"+c+"'",d<a.length-1&&(b+=",")}),b}};module.exports=call;