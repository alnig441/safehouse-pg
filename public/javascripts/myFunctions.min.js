var call={setDate:function(a){var b,c,d;if(a=a.toLowerCase(),"i"==a.charAt(0)&&"m"==a.charAt(1)&&"g"==a.charAt(2)&&a.length>=23){var e=[];a=a.slice(4,19),c=a.split("_"),e.push(c[0].slice(0,4)),e.push(c[0].slice(4,6)),e.push(c[0].slice(6,8)),e.push(c[1].slice(0,2)),e.push(c[1].slice(2,4)),e.push(c[1].slice(4,6)),d=[e.slice(0,3).join("-"),e.slice(3,6).join(":")].join(" "),b=new Date([e.slice(0,3).join("-"),e.slice(3,6).join(":")].join(" "))}else a.length>=19?(a=a.slice(0,19),a=a.split(" "),c=a[1].split("."),c=c.join(":"),a.pop(),a.push(c),d=a.join(" "),b=new Date(a.join(" "))):b=new Date;return d},parser:function(a,b){var c=a.slice(1,11),d={},e=c.split("-"),f=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"],g=["Jan","Feb","Mar","Apr","May","Juni","Juli","Aug","Sep","Oct","Nov","Dec"];switch(b){case"en":d=e[2]+" "+f[parseInt(e[1]-1)]+" "+e[0];break;case"da":d=e[2]+" "+g[parseInt(e[1]-1)]+" "+e[0]}return d},splitString:function(a){var b=",",c=a.split(b);return c},isAuthenticated:function(a,b,c){return a.isAuthenticated()?c():void b.send("unauthorized OR session expired - log in again")},selection:function(a,b){var c=[];return"events"==b.database?(a.forEach(function(a,d,e){var f=a.created;f.getMonth()+1==b.month&&f.getFullYear()==b.year&&c.push(a)}),c):"images"==b.database?(a.forEach(function(a,d,e){var f=0;a.meta.forEach(function(d,e,g){for(var h=0;h<b.meta.length;h++)d==b.meta[h]&&(f++,f==b.meta.length&&c.push(a))})}),c):void 0},build_set:function(a,b){var c=new Set;switch(a.option){case"year":c.add(b.getUTCFullYear());break;case"month":b.getUTCFullYear()===req.body.year&&c.add(b.getUTCMonth());break;case"day":b.getUTCFullYear()===req.body.year&&b.getUTCMonth()===req.body.month&&c.add(b.getUTCDate())}return c},build_obj:function(a){var b="";return a.forEach(function(c,d,e){b+="'"+c+"'",d<a.length-1&&(b+=",")}),b}};module.exports=call;